import api from "@/configs/axios";
import { authClient } from "@/lib/auth-client";
import { Loader2Icon } from "lucide-react";
import React, { useState } from "react";
import { useNavigate } from "react-router-dom";
import { toast } from "sonner";


const Home = () => {

  const {data: session} = authClient.useSession();
  const navigate = useNavigate();

   const [input, setInput] = React.useState('');
   const [loading, setLoading] = useState(false);

   const onSubmitHandler = async (e: React.FormEvent) => {
    e.preventDefault();
    try {
      if(!session?.user) {
        return toast.error('please sign in to create a project')
      } else if(!input.trim()){
        return toast.error('please enter a message')
      }
      setLoading(true);
      const {data} = await api.post('/api/user/project', {initial_prompt: input});
      setLoading(false);
      navigate(`/projects/${data.projectsId}`)
    } catch (error: any) {
      setLoading (false);
      toast.error(error?.response?.data?.message || error.message);
      console.log(error);
    }
  }

  return (

      <>
      
      <section className="flex flex-col items-center text-white text-sm pb-20 px-4 font-poppins">
          
          
        <a href="https://prebuiltui.com" className="flex items-center gap-2 border border-slate-700 rounded-full p-1 pr-3 text-sm mt-20">
          <span className="bg-indigo-600 text-xs px-3 py-1 rounded-full">NEW</span>
          <p className="flex items-center gap-2">
            <span>Try 30 days free trial option</span>
            <svg className="mt-px" width="6" height="9" viewBox="0 0 6 9" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m1 1 4 3.5L1 8" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/></svg>
          </p>
        </a>

        <h1 className="text-center text-[40px] leading-[48px] md:text-6xl md:leading-[70px] mt-4 font-semibold max-w-3xl">
          Turn thoughts into websites instantly, with AI.
        </h1>

        <p className="text-center text-base max-w-md mt-2">
          Create, customize and publish website faster than ever with AI Site Builder.
        </p>

        <form onSubmit={onSubmitHandler} className="bg-white/10 max-w-2xl w-full rounded-xl p-4 mt-10 border border-indigo-600/70 focus-within:ring-2 ring-indigo-500 transition-all">
          <textarea onChange={e => setInput(e.target.value)} className="bg-transparent outline-none text-gray-300 resize-none w-full" rows={4} placeholder="Describe your presentation in details" required />
          <button className="ml-auto flex items-center gap-2 bg-gradient-to-r from-[#CB52D4] to-indigo-600 rounded-md px-4 py-2">
            {!loading ? "create with AI" : (
              <>
              Creating <Loader2Icon className='animate-spin size-4 text-white'/>
              </>
            )}
            
          </button>
        </form>

        <div className="flex flex-wrap items-center justify-center gap-16 md:gap-20 mx-auto mt-16">
          <svg width="90" height="32" viewBox="0 0 90 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5.176 22.3q.57 1.514 1.579 2.588a6.8 6.8 0 0 0 2.39 1.645q1.382.57 3.005.57 1.579 0 2.96-.592a7.3 7.3 0 0 0 2.413-1.666 7.6 7.6 0 0 0 1.6-2.566q.57-1.491.57-3.333V0H24.3v30.7h-4.561v-2.851a10.6 10.6 0 0 1-3.619 2.5q-2.083.877-4.496.877-2.456 0-4.583-.856a10.7 10.7 0 0 1-3.685-2.434Q1.8 26.358.9 24.143T0 19.209V0h4.605v18.946q0 1.842.57 3.355M32.237 0v11.183a11.7 11.7 0 0 1 3.552-2.434q2.019-.9 4.387-.899 2.456 0 4.605.921a11.8 11.8 0 0 1 3.728 2.5 11.8 11.8 0 0 1 2.5 3.728q.921 2.149.922 4.56 0 2.413-.922 4.54a11.8 11.8 0 0 1-2.5 3.706 11.8 11.8 0 0 1-3.728 2.5q-2.15.92-4.605.92-2.37 0-4.409-.899-2.039-.898-3.574-2.434V30.7h-4.386V0zm.504 22.586a7.6 7.6 0 0 0 1.645 2.456 7.9 7.9 0 0 0 2.456 1.666q1.404.614 3.027.614a7.4 7.4 0 0 0 2.982-.613 7.7 7.7 0 0 0 2.435-1.667 8.1 8.1 0 0 0 1.644-2.456q.614-1.403.614-3.026a7.6 7.6 0 0 0-.614-3.048 8.1 8.1 0 0 0-1.645-2.478 7.4 7.4 0 0 0-2.434-1.645 7.6 7.6 0 0 0-2.982-.592 7.6 7.6 0 0 0-2.983.592 7.6 7.6 0 0 0-2.456 1.645 7.9 7.9 0 0 0-1.667 2.478 7.6 7.6 0 0 0-.614 3.048q0 1.622.592 3.026m21.689-7.543a11.9 11.9 0 0 1 2.412-3.706 11.2 11.2 0 0 1 3.64-2.522q2.106-.92 4.562-.92 2.413 0 4.474.877a10.6 10.6 0 0 1 3.553 2.434q1.492 1.556 2.325 3.684.833 2.127.833 4.626v1.448H58.027a7.6 7.6 0 0 0 2.522 4.539 7.5 7.5 0 0 0 2.236 1.337 7.3 7.3 0 0 0 2.654.483q3.991 0 6.448-3.29l3.202 2.369a11.9 11.9 0 0 1-4.123 3.508q-2.457 1.272-5.527 1.272-2.5 0-4.671-.877a11.4 11.4 0 0 1-3.772-2.456 11.7 11.7 0 0 1-2.522-3.706q-.921-2.127-.921-4.627 0-2.368.877-4.473m6.162-1.732q-1.863 1.556-2.478 4.144h13.641q-.57-2.587-2.434-4.144t-4.364-1.557-4.365 1.557m23.928.504q-1.404 1.535-1.404 4.166V30.7h-4.43V8.333h4.386v2.763a6.2 6.2 0 0 1 2.17-2.15q1.34-.789 3.18-.789h1.536v4.123h-1.842q-2.193 0-3.597 1.535" fill="#A6A6A6"/>
            </svg>
            <svg width="78" height="31" viewBox="0 0 78 31" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5.628.42H0v5.63h5.628z" fill="#A6A6A6"/>
                <path d="M5.488 29.743V9.473H.16v20.27zm35.412.2v-4.967c-.782 0-1.443-.04-1.923-.12-.561-.08-.982-.28-1.262-.56-.28-.281-.46-.682-.56-1.202-.081-.501-.121-1.162-.121-1.963v-7.09H40.9V9.474h-3.866V1.562h-5.348v19.609c0 1.662.14 3.064.42 4.186.281 1.102.762 2.003 1.423 2.684.66.68 1.542 1.162 2.604 1.462 1.081.3 2.443.44 4.066.44zm30.604-.2V0h-5.348v29.743zM26.54 11.457c-1.483-1.603-3.566-2.404-6.21-2.404-1.281 0-2.443.26-3.505.781a7.5 7.5 0 0 0-2.643 2.164l-.3.38V9.474H8.611v20.27h5.308V18.947v.74-.36c.06-1.903.521-3.305 1.402-4.206.942-.961 2.083-1.442 3.385-1.442 1.542 0 2.724.48 3.505 1.402.761.921 1.162 2.223 1.162 3.886v10.755h5.388V18.227c.02-2.885-.741-5.168-2.223-6.77m36.853 8.111c0-1.462-.26-2.824-.76-4.106a11 11 0 0 0-2.144-3.344c-.921-.962-2.023-1.703-3.305-2.244-1.282-.54-2.704-.8-4.246-.8-1.462 0-2.844.28-4.126.82-1.282.561-2.403 1.302-3.345 2.244a10.5 10.5 0 0 0-2.243 3.345c-.56 1.281-.821 2.663-.821 4.126 0 1.462.26 2.844.78 4.126a10.3 10.3 0 0 0 2.184 3.345c.921.94 2.063 1.702 3.385 2.243 1.322.56 2.784.841 4.346.841 4.527 0 7.331-2.063 9.013-3.986l-3.845-2.924c-.801.961-2.724 2.263-5.128 2.263-1.502 0-2.744-.34-3.685-1.041-.941-.681-1.582-1.643-1.923-2.824l-.06-.18h15.923zM47.51 17.707c0-1.482 1.703-4.066 5.368-4.086 3.665 0 5.388 2.584 5.388 4.066z" fill="#A6A6A6"/>
                <path d="M77.594 27.1c-.1-.241-.24-.441-.421-.622a2 2 0 0 0-1.382-.58c-.28 0-.52.06-.761.16-.24.1-.44.24-.621.42a2 2 0 0 0-.58 1.382c0 .28.06.521.16.761s.24.441.42.621.38.32.62.42c.241.101.502.161.762.161.28 0 .52-.06.761-.16.24-.1.44-.24.621-.42a2 2 0 0 0 .58-1.382 2 2 0 0 0-.16-.762m-.32 1.401c-.081.2-.201.38-.341.521-.14.14-.32.26-.521.34-.2.08-.4.12-.641.12-.22 0-.44-.04-.641-.12-.2-.08-.38-.2-.52-.34s-.261-.32-.341-.52a1.7 1.7 0 0 1-.12-.642c0-.22.04-.44.12-.64s.2-.381.34-.521.32-.26.521-.34c.2-.081.4-.121.641-.121.22 0 .44.04.64.12.201.08.381.2.522.34.14.14.26.321.34.521s.12.401.12.641c.02.24-.04.441-.12.641m-1.123-.48c.16-.02.28-.08.381-.18s.16-.241.16-.441c0-.22-.06-.38-.2-.501-.12-.12-.34-.18-.6-.18h-.882v2.263h.42v-.921h.3l.562.921h.44zm-.22-.32h-.5v-.642h.5c.06 0 .12.02.18.04s.1.06.12.1.04.1.04.18a.4.4 0 0 1-.04.18c-.04.04-.08.081-.12.101-.06.02-.12.04-.18.04" fill="#A6A6A6"/>
            </svg>
            <svg width="143" height="32" viewBox="0 0 143 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M77.624 10.304h3.192v8.877c0 4.506-2.484 7.09-6.81 7.09-4.281 0-6.742-2.539-6.742-6.966v-8.99h3.191v8.889c0 2.63 1.293 4.034 3.596 4.034s3.573-1.371 3.573-3.922zm-17.978 6.338H52.43v-6.338h-3.19v15.732h3.19v-6.394h7.203v6.394h3.191V10.304h-3.19v6.338zm79.916-6.338v15.71h3.146v-15.71zm-12.529 8.956h5.809v-2.865h-5.809V13.17h8.427v-2.855h-11.574v15.71h11.878v-2.866h-8.731zm-12.518 1.854-3.573-10.821h-2.607l-3.574 10.821-3.472-10.81h-3.393l5.483 15.72h2.641l3.573-10.326 3.573 10.327h2.664l5.472-15.72h-3.315zm-22.294-10.72 6.866 15.63h-3.349l-1.416-3.27H87.12l-.1.225-1.327 3.046h-3.258l6.933-15.72h2.787zm.764 9.147-2.27-5.27-2.258 5.27-.158.36h4.832z" fill="#A6A6A6"/>
                <path d="M17.822 24.361c.045-.033.056-.1.034-.157A94.4 94.4 0 0 0 6.338 5.506s-3.618 3.438-3.36 6.888a6.07 6.07 0 0 0 2.102 4.147c3.157 3.078 10.798 6.966 12.574 7.854a.16.16 0 0 0 .168-.034m-1.18 2.63a.17.17 0 0 0-.168-.113l-12.72.439c1.382 2.46 3.708 4.37 6.124 3.787 1.674-.416 5.45-3.057 6.697-3.956.1-.078.067-.146.067-.157m.191-1.135c.068-.101-.045-.191-.045-.191C11.204 21.889.371 16.09.371 16.09a7.53 7.53 0 0 0 6.787 9.855c.191.034 7.563 0 9.54-.011a.2.2 0 0 0 .135-.08M17.676.01c-.55.045-2.045.394-2.045.394-3.371.865-4.169 3.932-4.169 3.932-.618 1.922.011 4.046.011 4.046 1.124 4.989 6.652 13.203 7.844 14.922.078.09.146.056.146.056.067-.022.123-.078.123-.157C21.43 4.866 17.676.011 17.676.011M21.89 23.34c.067.022.146 0 .18-.068 1.224-1.764 6.72-9.933 7.843-14.9 0 0 .607-2.404.022-4.045 0 0-.831-3.112-4.202-3.933 0 0-.967-.247-2-.393 0 0-3.776 4.854-1.933 23.193-.011.067.034.123.09.146m3.011 3.55a.22.22 0 0 0-.146.102c-.011.067 0 .123.045.168 1.214.877 4.91 3.461 6.686 3.956 0 0 3.292 1.123 6.147-3.787zm16.125-10.82s-10.81 5.81-16.406 9.585c-.056.045-.09.112-.067.18 0 0 .056.1.135.1 2 0 9.574.012 9.776-.022a7.3 7.3 0 0 0 2.191-.506s2.697-.854 4.09-3.921c0 0 1.248-2.495.281-5.416m-17.428 8.29a.15.15 0 0 0 .168.012c1.82-.91 9.406-4.765 12.54-7.832 0 0 1.99-1.596 2.09-4.17.225-3.561-3.36-6.865-3.36-6.865s-6.629 8.034-11.494 18.653a.22.22 0 0 0 .056.202" fill="#A6A6A6"/>
            </svg>
            <svg width="95" height="32" viewBox="0 0 95 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M20.504 24.71c-1.113.196-2.246.255-3.418.411l-3.574-10.469V25.57c-1.114.117-2.13.274-3.184.43V6h2.969l4.062 11.348V6h3.145zm6.152-11.386c1.211 0 3.067-.058 4.18-.058v3.124c-1.387 0-3.008 0-4.18.06v4.648c1.836-.117 3.672-.274 5.528-.332v3.007l-8.653.684V6h8.653v3.125h-5.528zm17.149-4.199h-3.243V23.5c-1.054 0-2.109 0-3.124.039V9.125h-3.243V6h9.61zm5.078 3.984h4.277v3.125h-4.277v7.09h-3.067V6h8.73v3.125h-5.663zm10.742 7.48c1.777.04 3.574.177 5.312.274v3.086c-2.792-.176-5.585-.351-8.437-.41V6h3.125zm7.95 3.575c.995.059 2.05.117 3.066.234V6h-3.067zM84.331 6l-3.965 9.512L84.332 26c-1.172-.156-2.344-.371-3.516-.567l-2.246-5.78-2.285 5.312c-1.133-.195-2.227-.254-3.36-.41l4.024-9.16L73.316 6h3.36l2.05 5.254L80.914 6z" fill="#A6A6A6"/>
            </svg>
            <svg width="130" height="32" viewBox="0 0 130 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M115.396 10.5118C116.127 10.5118 116.73 10.1314 116.811 9.63989L117.533 1.47037C117.533 0.662892 116.587 0 115.398 0C114.21 0 113.265 0.662889 113.265 1.47051L113.987 9.63989C114.066 10.1312 114.668 10.5118 115.398 10.5118H115.396ZM110.98 13.0635C111.347 12.4307 111.32 11.7194 110.933 11.4034L104.218 6.69304C103.52 6.28871 102.473 6.77538 101.879 7.80572C101.283 8.83475 101.389 9.98402 102.085 10.3885L109.52 13.8504C109.985 14.0227 110.619 13.6911 110.983 13.0587L110.98 13.0635ZM119.815 13.0591C120.182 13.6916 120.812 14.0233 121.277 13.8509L128.713 10.3889C129.413 9.9846 129.513 8.83519 128.922 7.80616C128.325 6.77684 127.277 6.28915 126.58 6.69347L119.865 11.4038C119.481 11.7194 119.452 12.4312 119.817 13.064L119.815 13.0591ZM115.396 20.7168C116.127 20.7168 116.73 21.094 116.811 21.5859L117.533 29.7543C117.533 30.5642 116.587 31.2257 115.398 31.2257C114.21 31.2257 113.265 30.5642 113.265 29.7543L113.987 21.5859C114.066 21.094 114.668 20.7168 115.398 20.7168H115.396ZM119.815 18.1645C120.182 17.5303 120.812 17.2015 121.277 17.3758L128.713 20.8354C129.413 21.2402 129.513 22.3906 128.922 23.4205C128.325 24.4465 127.277 24.9355 126.58 24.5317L119.865 19.8258C119.481 19.5077 119.452 18.7954 119.817 18.1632H119.814M110.98 18.1636C111.347 18.7954 111.32 19.5077 110.933 19.8264L104.218 24.5322C103.52 24.9359 102.473 24.4469 101.879 23.421C101.283 22.3911 101.389 21.2406 102.085 20.8359L109.52 17.3762C109.985 17.2019 110.619 17.5307 110.983 18.1651H110.98" fill="#A6A6A6"/>
                <path d="M73.0406 19.8106C73.0406 20.0613 73.0183 20.3198 72.9497 20.5469C72.6649 21.4901 71.6883 22.2877 70.4666 22.2877C69.448 22.2877 68.6389 21.709 68.6389 20.4869C68.6389 18.6164 70.6976 18.0999 73.0412 18.1128L73.0406 19.8104V19.8106ZM76.7166 16.5509C76.7166 13.4666 75.3987 10.7527 70.9456 10.7527C68.6597 10.7527 66.8455 11.3947 65.8553 11.967L66.5805 14.4465C67.4855 13.8752 68.9279 13.4022 70.2929 13.4022C72.5516 13.3959 72.9216 14.6813 72.9216 15.504V15.6987C67.9978 15.6914 64.8854 17.3963 64.8854 20.8693C64.8854 22.9915 66.4706 24.9792 69.2263 24.9792C70.9195 24.9792 72.3377 24.3033 73.1864 23.2196H73.2702C73.2702 23.2196 73.8318 25.5724 76.9321 24.6722C76.7703 23.6938 76.7171 22.6493 76.7171 21.3933L76.7167 16.5509M0 6.55234C0 6.55234 3.21753 19.7364 3.73131 21.8761C4.33065 24.3736 5.41084 25.293 8.52371 24.6722L10.5326 16.4986C11.042 14.4674 11.383 13.0192 11.7112 10.955H11.7683C11.9988 13.041 12.3257 14.4736 12.7449 16.5053C12.7449 16.5053 13.5623 20.2162 13.9816 22.1647C14.4014 24.1125 15.5698 25.3409 18.6192 24.6722L23.4064 6.55176H19.5424L17.9074 14.3865C17.4678 16.6661 17.0693 18.4494 16.7617 20.5344H16.7071C16.4277 18.4677 16.0719 16.7572 15.6254 14.5356L13.9245 6.55176H9.89788L8.07741 14.3343C7.56217 16.6999 7.07899 18.6093 6.77291 20.6249H6.71723C6.40298 18.7269 5.98467 16.3262 5.53196 14.0374C5.53196 14.0374 4.45119 8.47061 4.07106 6.55176L0 6.55234ZM30.7154 19.8106C30.7154 20.0613 30.6931 20.3198 30.6234 20.5469C30.3392 21.4901 29.362 22.2877 28.1403 22.2877C27.1215 22.2877 26.3136 21.709 26.3136 20.4869C26.3136 18.6164 28.3718 18.0999 30.7158 18.1128L30.7154 19.8104V19.8106ZM34.3909 16.5509C34.3909 13.4666 33.0729 10.7527 28.6207 10.7527C26.3343 10.7527 24.5186 11.3947 23.529 11.967L24.2534 14.4465C25.1582 13.8752 26.6006 13.4022 27.966 13.4022C30.2264 13.3959 30.5963 14.6813 30.5963 15.504V15.6987C25.6705 15.6914 22.5595 17.3963 22.5595 20.8693C22.5595 22.9915 24.1439 24.9792 26.8975 24.9792C28.593 24.9792 30.0104 24.3033 30.8601 23.2196H30.9429C30.9429 23.2196 31.5061 25.5724 34.6057 24.6722C34.4436 23.6938 34.3909 22.6493 34.3909 21.3933V16.5509ZM40.5251 20.8258V6.55234H36.8448V24.6728H40.5251V20.8258ZM88.67 6.55234V19.9195C88.67 21.7633 89.0176 23.0536 89.7588 23.8433C90.4083 24.5338 91.4753 24.9806 92.7551 24.9806C93.8436 24.9806 94.9137 24.7729 95.4187 24.5856L95.3712 21.7105C94.9955 21.8023 94.564 21.8766 93.9734 21.8766C92.7194 21.8766 92.3 21.0733 92.3 19.4188V14.3043H95.5049V10.8368H92.3V6.55234H88.67ZM79.1706 11.0601V24.6728H82.9671V17.7028C82.9671 17.3261 82.9898 16.9978 83.0494 16.6976C83.3303 15.2368 84.4468 14.3043 86.0505 14.3043C86.4901 14.3043 86.8048 14.3521 87.1457 14.4005V10.8368C86.8596 10.7798 86.6655 10.7531 86.3095 10.7531C84.8928 10.7531 83.2809 11.6673 82.6045 13.6283H82.5018V11.0601H79.1706ZM43.102 11.0601V24.6728H46.8008V16.6903C46.8008 16.3157 46.8448 15.9195 46.9745 15.5761C47.2811 14.7724 48.0291 13.8312 49.2227 13.8312C50.7159 13.8312 51.4132 15.093 51.4132 16.914V24.6718H55.1091V16.592C55.1091 16.2347 55.1579 15.8038 55.2636 15.4887C55.567 14.5739 56.3728 13.8301 57.4825 13.8301C58.9956 13.8301 59.7219 15.0698 59.7219 17.2132V24.6713H63.4203V16.6534C63.4203 12.4255 61.2733 10.7518 58.8494 10.7518C57.777 10.7518 56.9296 11.0204 56.1632 11.4901C55.5197 11.8865 54.9425 12.4482 54.4389 13.1866H54.3843C53.7998 11.7196 52.4246 10.7525 50.6325 10.7525C48.3303 10.7525 47.2956 11.9196 46.668 12.9093H46.6129V11.0596H43.102" fill="#A6A6A6"/>
            </svg>
        </div>
      </section>
      </>
  
  )
}
  

export default Home